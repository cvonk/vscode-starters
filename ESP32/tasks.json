{
    "version": "2.0.0",
    "env": { 
        "bash": "C:/Espressif/ESP32/msys32/usr/bin/bash.exe",
        "MSYSTEM": "MINGW32",  // directs /etc/profile
        "CHERE_INVOKING": "1"  // do not "cd ~"
    },
    "tasks": [
        {
            "label": "make app",
            "type": "process",
            "command": "C:/Espressif/ESP32/msys32/usr/bin/bash.exe",
            "args": [ "--login", "-c", "make -j4 app" ],
            "presentation": {
                "panel": "shared",
            },
            "problemMatcher": [ "$gcc" ]
        },
        {
            "label": "make clean",
            "type": "process",
            "command": "C:/Espressif/ESP32/msys32/usr/bin/bash.exe",
            "args": [ "--login", "-c", "make -j4 clean" ],
            "problemMatcher": [ "$gcc" ]
        },
        {
            "label": "make flash",
            "type": "process",
            "command": "C:/Espressif/ESP32/msys32/usr/bin/bash.exe",
            "args": [ "--login", "-c", "make -j4 flash" ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [ "$gcc" ]
        },
        {
            "label": "make monitor",  // supports env PRINT_FILTER=""
            "type": "process",
            "command": "C:/Espressif/ESP32/msys32/usr/bin/bash.exe",
            "args": [ "--login", "-c", "make -j4 monitor" ],
            "problemMatcher": [ "$gcc" ],
            "group": {
                "kind": "test",
                "isDefault": true
            }
        },
        {
            "label": "make menuconfig",
            "type": "process",
            "command": "C:/Espressif/ESP32/msys32/mingw32.exe",  // looks bad in vscode terminal itsel
            "args": [ "make", "menuconfig" ],
            "problemMatcher": [ "$gcc" ]
        },
        {
            "label": "openocd",
            "type": "process",
            "isBackground": true,
            "options": {
                "cwd": "~/esp/openocd-esp32"
            },
            "command": "bin/openocd",
            "args": [
                "-s", "share/openocd/scripts",
                "-f", "interface/jlink.cfg",
                "-f", "board/esp-wroom-32.cfg"
            ],
            "problemMatcher": []
        }
    ]
}
